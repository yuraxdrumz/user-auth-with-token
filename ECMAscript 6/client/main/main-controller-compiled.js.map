{"version":3,"sources":["main-controller.js"],"names":[],"mappings":"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","file":"main-controller-compiled.js","sourcesContent":["(()=>{\r\n    angular.module('myApp')\r\n    .controller('mainController',['$scope','$http','$location','auth','tweet',($scope,$http,$location,auth,tweet)=>{\r\n\r\n        //if user logged in get tweets and get user info\r\n        if(auth.isLoggedIn()){\r\n            $scope.loggedIn = true;\r\n            tweet.getAllTweets().then((res)=>{\r\n            $scope.tweets = res;\r\n            $scope.user = auth.currentUser()\r\n            })\r\n        }\r\n        // watch if user is logged in, if not, switch main to login screen\r\n        $scope.$watch(auth.isLoggedIn,(newVal,oldVal)=>{\r\n            if(newVal === false) $scope.loggedIn = false})\r\n        //login function\r\n        $scope.login = ()=>{\r\n            auth.login($scope.user)\r\n                .then(()=>{\r\n                $location.path('/profile')\r\n            })\r\n        }\r\n        //logout function\r\n        $scope.logout = ()=>{\r\n            auth.logout()\r\n            $scope.isLoggedIn = false;\r\n            $location.path('/')\r\n        }\r\n        //send tweet on enter\r\n        $scope.sendTweet = (event)=>{\r\n            event = event || window.event;\r\n                if(event.keyCode === 13){\r\n                    let request = {\r\n                        user:$scope.user.name || $scope.user.email,\r\n                        userId: $scope.user._id,\r\n                        userImage:$scope.user.image,\r\n                        content: $scope.newTweet,\r\n                        likes:0\r\n                    }\r\n                    tweet.postTweet(request).then((res)=>{\r\n                        $scope.tweets = res\r\n                        $scope.newTweet = ''\r\n                    })\r\n                }\r\n        };\r\n        //like functionality\r\n        $scope.like =(tweetObject,userId)=>{\r\n            tweet.likeTweet(tweetObject._id,userId).then((res)=>{\r\n                $scope.tweets[$scope.tweets.indexOf(tweetObject)] = res\r\n            })\r\n        }\r\n        //unlike functionality\r\n        $scope.unlike = (tweetObject,userId)=>{\r\n            tweet.unlikeTweet(tweetObject._id,userId).then((res)=>{\r\n                $scope.tweets[$scope.tweets.indexOf(tweetObject)] = res\r\n            })\r\n        }\r\n        //check to see if post is liked or not\r\n        $scope.isLiked = (tweet)=>{\r\n            for(let i=0,len=$scope.tweets[$scope.tweets.indexOf(tweet)].likeFromUser.length;i<len;i++){\r\n                if($scope.tweets[$scope.tweets.indexOf(tweet)].likeFromUser[i] == $scope.user._id) return true\r\n                else\r\n                    if($scope.tweets[$scope.tweets.indexOf(tweet)].likeFromUser[i] == undefined) return false\r\n            }\r\n        }\r\n    }])\r\n})();\r\n"]}